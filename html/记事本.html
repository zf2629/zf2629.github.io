
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÊûÅÁÆÄËÆ∞‰∫ãÊú¨</title>
    <style>
        :root {
            --primary: #4f46e5;
            --bg: #f8fafc;
            --text: #1e293b;
            --border: #e2e8f0;
        }
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', system-ui, sans-serif;
        }
        body {
            background-color: var(--bg);
            color: var(--text);
            min-height: 100vh;
            padding: 2rem;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        header {
            padding: 1.5rem;
            background: var(--primary);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        h1 {
            font-size: 1.5rem;
            font-weight: 600;
        }
        .btn {
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            border: none;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
        }
        .btn-primary {
            background: white;
            color: var(--primary);
        }
        .btn-primary:hover {
            background: rgba(255,255,255,0.9);
        }
        .btn-danger {
            background: #ef4444;
            color: white;
        }
        .btn-danger:hover {
            background: #dc2626;
        }
        .main-content {
            display: grid;
            grid-template-columns: 300px 1fr;
            height: calc(100vh - 200px);
        }
        .sidebar {
            border-right: 1px solid var(--border);
            overflow-y: auto;
        }
        .search-box {
            padding: 1rem;
            border-bottom: 1px solid var(--border);
        }
        #searchInput {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid var(--border);
            border-radius: 0.5rem;
        }
        .notes-list {
            list-style: none;
        }
        .note-item {
            padding: 1rem;
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            transition: all 0.2s;
        }
        .note-item:hover {
            background: #f1f5f9;
        }
        .note-item.active {
            background: #e0e7ff;
        }
        .note-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .note-preview {
            font-size: 0.875rem;
            color: #64748b;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .note-date {
            font-size: 0.75rem;
            color: #94a3b8;
            margin-top: 0.25rem;
        }
        .editor {
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        #noteTitle {
            padding: 1rem;
            font-size: 1.5rem;
            font-weight: 600;
            border: none;
            border-bottom: 1px solid var(--border);
            outline: none;
        }
        #noteContent {
            flex: 1;
            padding: 1rem;
            border: none;
            resize: none;
            outline: none;
            line-height: 1.6;
            font-size: 1rem;
        }
        .empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: #94a3b8;
            text-align: center;
            padding: 2rem;
        }
        .empty-state i {
            font-size: 3rem;
            margin-bottom: 1rem;
        }
        .action-buttons {
            display: flex;
            gap: 0.5rem;
            padding: 1rem;
            border-top: 1px solid var(--border);
        }
        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            .sidebar {
                border-right: none;
                border-bottom: 1px solid var(--border);
                max-height: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ÊûÅÁÆÄËÆ∞‰∫ãÊú¨</h1>
            <button id="newNoteBtn" class="btn btn-primary">Êñ∞Âª∫Á¨îËÆ∞</button>
        </header>
        
        <div class="main-content">
            <div class="sidebar">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="ÊêúÁ¥¢Á¨îËÆ∞...">
                </div>
                <ul id="notesList" class="notes-list">
                    <!-- Á¨îËÆ∞ÂàóË°®Â∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
                </ul>
            </div>
            
            <div class="editor">
                <input type="text" id="noteTitle" placeholder="Á¨îËÆ∞Ê†áÈ¢ò">
                <textarea id="noteContent" placeholder="ÂºÄÂßãÂÜô‰Ωú..."></textarea>
                
                <div id="emptyState" class="empty-state">
                    <div>üìù</div>
                    <h3>Ê≤°ÊúâÈÄâÊã©Á¨îËÆ∞</h3>
                    <p>‰ªéÂ∑¶‰æßÈÄâÊã©Á¨îËÆ∞ÊàñÂàõÂª∫Êñ∞Á¨îËÆ∞</p>
                </div>
                
                <div class="action-buttons">
                    <button id="saveNoteBtn" class="btn btn-primary">‰øùÂ≠ò</button>
                    <button id="deleteNoteBtn" class="btn btn-danger">Âà†Èô§</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOMÂÖÉÁ¥†
            const notesListEl = document.getElementById('notesList');
            const noteTitleEl = document.getElementById('noteTitle');
            const noteContentEl = document.getElementById('noteContent');
            const searchInputEl = document.getElementById('searchInput');
            const newNoteBtn = document.getElementById('newNoteBtn');
            const saveNoteBtn = document.getElementById('saveNoteBtn');
            const deleteNoteBtn = document.getElementById('deleteNoteBtn');
            const emptyStateEl = document.getElementById('emptyState');
            
            // ÂΩìÂâçÈÄâ‰∏≠ÁöÑÁ¨îËÆ∞ID
            let currentNoteId = null;
            
            // ÂàùÂßãÂåñÂ∫îÁî®
            initApp();
            
            function initApp() {
                loadNotes();
                setupEventListeners();
                
                // ÈªòËÆ§ÊòæÁ§∫Á©∫Áä∂ÊÄÅ
                showEmptyState();
            }
            
            function setupEventListeners() {
                // Êñ∞Âª∫Á¨îËÆ∞
                newNoteBtn.addEventListener('click', createNewNote);
                
                // ‰øùÂ≠òÁ¨îËÆ∞
                saveNoteBtn.addEventListener('click', saveCurrentNote);
                
                // Âà†Èô§Á¨îËÆ∞
                deleteNoteBtn.addEventListener('click', deleteCurrentNote);
                
                // ÊêúÁ¥¢Á¨îËÆ∞
                searchInputEl.addEventListener('input', function() {
                    loadNotes(this.value);
                });
                
                // Ëá™Âä®‰øùÂ≠ò
                noteTitleEl.addEventListener('blur', autoSave);
                noteContentEl.addEventListener('blur', autoSave);
                
                // ÈîÆÁõòÂø´Êç∑ÈîÆ
                document.addEventListener('keydown', function(e) {
                    // Ctrl+S ‰øùÂ≠ò
                    if (e.ctrlKey && e.key === 's') {
                        e.preventDefault();
                        saveCurrentNote();
                    }
                    
                    // Ctrl+N Êñ∞Âª∫
                    if (e.ctrlKey && e.key === 'n') {
                        e.preventDefault();
                        createNewNote();
                    }
                    
                    // Delete Âà†Èô§
                    if (e.key === 'Delete' && currentNoteId) {
                        e.preventDefault();
                        deleteCurrentNote();
                    }
                });
            }
            
            function loadNotes(searchTerm = '') {
                // ‰ªélocalStorageËé∑ÂèñÁ¨îËÆ∞
                let notes = JSON.parse(localStorage.getItem('notes')) || [];
                
                // Â¶ÇÊûúÊúâÊêúÁ¥¢ËØçÔºåËøáÊª§Á¨îËÆ∞
                if (searchTerm) {
                    const term = searchTerm.toLowerCase();
                    notes = notes.filter(note => 
                        note.title.toLowerCase().includes(term) || 
                        note.content.toLowerCase().includes(term)
                    );
                }
                
                // ÊåâÊõ¥Êñ∞Êó∂Èó¥ÊéíÂ∫è
                notes.sort((a, b) => new Date(b.updatedAt) - new Date(a.updatedAt));
                
                // Ê∏ÖÁ©∫ÂàóË°®
                notesListEl.innerHTML = '';
                
                // Â¶ÇÊûúÊ≤°ÊúâÁ¨îËÆ∞ÔºåÊòæÁ§∫ÊèêÁ§∫
                if (notes.length === 0) {
                    const li = document.createElement('li');
                    li.className = 'note-item';
                    li.textContent = 'Ê≤°ÊúâÊâæÂà∞Á¨îËÆ∞';
                    notesListEl.appendChild(li);
                    return;
                }
                
                // Ê∑ªÂä†Á¨îËÆ∞Âà∞ÂàóË°®
                notes.forEach(note => {
                    const li = document.createElement('li');
                    li.className = 'note-item';
                    if (note.id === currentNoteId) {
                        li.classList.add('active');
                    }
                    li.dataset.id = note.id;
                    
                    // Ê†ºÂºèÂåñÊó•Êúü
                    const date = new Date(note.updatedAt);
                    const formattedDate = date.toLocaleDateString() + ' ' + date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
                    
                    li.innerHTML = `
                        <div class="note-title">${note.title || 'Êó†Ê†áÈ¢ò'}</div>
                        <div class="note-preview">${note.content.substring(0, 60)}</div>
                        <div class="note-date">${formattedDate}</div>
                    `;
                    
                    li.addEventListener('click', function() {
                        loadNote(note.id);
                    });
                    
                    notesListEl.appendChild(li);
                });
            }
            
            function createNewNote() {
                // ÁîüÊàêÊñ∞ID
                currentNoteId = Date.now().toString();
                
                // Ê∏ÖÁ©∫ÁºñËæëÂô®
                noteTitleEl.value = '';
                noteContentEl.value = '';
                
                // ÈöêËóèÁ©∫Áä∂ÊÄÅ
                hideEmptyState();
                
                // ËÅöÁÑ¶Ê†áÈ¢ò
                noteTitleEl.focus();
                
                // ÈáçÊñ∞Âä†ËΩΩÁ¨îËÆ∞ÂàóË°®
                loadNotes(searchInputEl.value);
            }
            
            function loadNote(id) {
                // ‰ªélocalStorageËé∑ÂèñÁ¨îËÆ∞
                const notes = JSON.parse(localStorage.getItem('notes')) || [];
                const note = notes.find(n => n.id === id);
                
                if (note) {
                    currentNoteId = id;
                    noteTitleEl.value = note.title;
                    noteContentEl.value = note.content;
                    
                    // ÈöêËóèÁ©∫Áä∂ÊÄÅ
                    hideEmptyState();
                    
                    // ÈáçÊñ∞Âä†ËΩΩÁ¨îËÆ∞ÂàóË°®‰ª•Êõ¥Êñ∞Ê¥ªÂä®Áä∂ÊÄÅ
                    loadNotes(searchInputEl.value);
                }
            }
            
            function saveCurrentNote() {
                if (!currentNoteId) return;
                
                const title = noteTitleEl.value.trim();
                const content = noteContentEl.value;
                
                // Â¶ÇÊûúÊ≤°ÊúâÂÜÖÂÆπÔºå‰∏ç‰øùÂ≠ò
                if (!title && !content) return;
                
                // Ëé∑ÂèñÁé∞ÊúâÁ¨îËÆ∞
                let notes = JSON.parse(localStorage.getItem('notes')) || [];
                
                // Êü•ÊâæÂΩìÂâçÁ¨îËÆ∞ÊòØÂê¶Â≠òÂú®
                const existingNoteIndex = notes.findIndex(n => n.id === currentNoteId);
                const now = new Date().toISOString();
                
                if (existingNoteIndex >= 0) {
                    // Êõ¥Êñ∞Áé∞ÊúâÁ¨îËÆ∞
                    notes[existingNoteIndex] = {
                        ...notes[existingNoteIndex],
                        title: title || 'Êó†Ê†áÈ¢ò',
                        content,
                        updatedAt: now
                    };
                } else {
                    // Ê∑ªÂä†Êñ∞Á¨îËÆ∞
                    notes.push({
                        id: currentNoteId,
                        title: title || 'Êó†Ê†áÈ¢ò',
                        content,
                        createdAt: now,
                        updatedAt: now
                    });
                }
                
                // ‰øùÂ≠òÂà∞localStorage
                localStorage.setItem('notes', JSON.stringify(notes));
                
                // ÈáçÊñ∞Âä†ËΩΩÁ¨îËÆ∞ÂàóË°®
                loadNotes(searchInputEl.value);
                
                // ÊòæÁ§∫‰øùÂ≠òÊàêÂäüÁöÑÊèêÁ§∫
                showToast('Á¨îËÆ∞Â∑≤‰øùÂ≠ò');
            }
            
            function autoSave() {
                if (currentNoteId && (noteTitleEl.value || noteContentEl.value)) {
                    saveCurrentNote();
                }
            }
            
            function deleteCurrentNote() {
                if (!currentNoteId) return;
                
                if (confirm('Á°ÆÂÆöË¶ÅÂà†Èô§Ëøô‰∏™Á¨îËÆ∞ÂêóÔºü')) {
                    // Ëé∑ÂèñÁé∞ÊúâÁ¨îËÆ∞
                    let notes = JSON.parse(localStorage.getItem('notes')) || [];
                    
                    // ËøáÊª§ÊéâÂΩìÂâçÁ¨îËÆ∞
                    notes = notes.filter(n => n.id !== currentNoteId);
                    
                    // ‰øùÂ≠òÂà∞localStorage
                    localStorage.setItem('notes', JSON.stringify(notes));
                    
                    // ÈáçÁΩÆÂΩìÂâçÁ¨îËÆ∞
                    currentNoteId = null;
                    noteTitleEl.value = '';
                    noteContentEl.value = '';
                    
                    // ÊòæÁ§∫Á©∫Áä∂ÊÄÅ
                    showEmptyState();
                    
                    // ÈáçÊñ∞Âä†ËΩΩÁ¨îËÆ∞ÂàóË°®
                    loadNotes(searchInputEl.value);
                    
                    // ÊòæÁ§∫Âà†Èô§ÊàêÂäüÁöÑÊèêÁ§∫
                    showToast('Á¨îËÆ∞Â∑≤Âà†Èô§');
                }
            }
            
            function showEmptyState() {
                emptyStateEl.style.display = 'flex';
                noteTitleEl.style.display = 'none';
                noteContentEl.style.display = 'none';
            }
            
            function hideEmptyState() {
                emptyStateEl.style.display = 'none';
                noteTitleEl.style.display = 'block';
                noteContentEl.style.display = 'block';
            }
            
            function showToast(message) {
                const toast = document.createElement('div');
                toast.textContent = message;
                toast.style.position = 'fixed';
                toast.style.bottom = '20px';
                toast.style.right = '20px';
                toast.style.backgroundColor = 'var(--primary)';
                toast.style.color = 'white';
                toast.style.padding = '10px 20px';
                toast.style.borderRadius = '5px';
                toast.style.zIndex = '1000';
                toast.style.boxShadow = '0 4px 6px rgba(0,0,0,0.1)';
                toast.style.animation = 'fadeIn 0.3s, fadeOut 0.3s 2.7s';
                
                document.body.appendChild(toast);
                
                setTimeout(() => {
                    toast.remove();
                }, 3000);
            }
        });
    </script>
</body>
</html>
